// Generated by CoffeeScript 1.6.3
(function() {
  var getScope;

  getScope = function() {
    return angular.element($("body")).scope();
  };

  GV.socket.on('connect', function() {
    return GV.socket.emit('login', GV.identify);
  });

  GV.socket.on('news', function(info) {
    var $scope;
    $scope = getScope();
    $scope.news = info.news;
    return $scope.$apply();
  });

  GV.socket.on('update', function(receive) {
    var $scope, target;
    $scope = getScope();
    target = $scope.find($("#" + receive.id));
    if (target != null) {
      target.contents = receive.contents;
    } else {
      $scope.postits.push(receive);
    }
    return $scope.$apply();
  });

  GV.socket.on('delete', function(receive) {
    var $scope;
    $scope = getScope();
    $scope.closePostit($("#" + receive.id));
    return $scope.$apply();
  });

  GV.socket.on('move', function(receive) {
    return $("#" + receive.id).offset({
      top: receive.top,
      left: receive.left
    });
  });

}).call(this);
